<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-changelog" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">更新日志 | MaxCompute Java SDK</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://aliyun.github.io/aliyun-odps-java-sdk/img/logo.svg"><meta data-rh="true" name="twitter:image" content="https://aliyun.github.io/aliyun-odps-java-sdk/img/logo.svg"><meta data-rh="true" property="og:url" content="https://aliyun.github.io/aliyun-odps-java-sdk/changelog/"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="更新日志 | MaxCompute Java SDK"><meta data-rh="true" name="description" content="[0.50.3-public] - 2024-10-23"><meta data-rh="true" property="og:description" content="[0.50.3-public] - 2024-10-23"><link data-rh="true" rel="canonical" href="https://aliyun.github.io/aliyun-odps-java-sdk/changelog/"><link data-rh="true" rel="alternate" href="https://aliyun.github.io/aliyun-odps-java-sdk/changelog/" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://aliyun.github.io/aliyun-odps-java-sdk/changelog/" hreflang="x-default"><link rel="stylesheet" href="/aliyun-odps-java-sdk/assets/css/styles.80b187af.css">
<script src="/aliyun-odps-java-sdk/assets/js/runtime~main.d31d5439.js" defer="defer"></script>
<script src="/aliyun-odps-java-sdk/assets/js/main.3348b23a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/aliyun-odps-java-sdk/"><div class="navbar__logo"><img src="/aliyun-odps-java-sdk/img/logo.svg" alt="MaxCompute Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/aliyun-odps-java-sdk/img/logo.svg" alt="MaxCompute Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">MaxCompute Java SDK</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aliyun-odps-java-sdk/intro/">文档</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/aliyun/aliyun-odps-jdbc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">使用 JDBC 链接 MaxCompute<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/aliyun/aliyun-odps-java-sdk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/aliyun-odps-java-sdk/intro/">ODPS SDK for Java 介绍</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/aliyun-odps-java-sdk/quick-start/">快速开始</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/aliyun-odps-java-sdk/category/核心功能/">核心功能</a><button aria-label="展开侧边栏分类 &#x27;核心功能&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/aliyun-odps-java-sdk/category/api-参考/">API 参考</a><button aria-label="展开侧边栏分类 &#x27;API 参考&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/aliyun-odps-java-sdk/category/附加功能/">附加功能</a><button aria-label="展开侧边栏分类 &#x27;附加功能&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/aliyun-odps-java-sdk/changelog/">更新日志</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/aliyun-odps-java-sdk/question/">常见问题</a></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/aliyun-odps-java-sdk/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">更新日志</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>更新日志</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0503-public---2024-10-23">[0.50.3-public] - 2024-10-23<a href="#0503-public---2024-10-23" class="hash-link" aria-label="[0.50.3-public] - 2024-10-23的直接链接" title="[0.50.3-public] - 2024-10-23的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="功能">功能<a href="#功能" class="hash-link" aria-label="功能的直接链接" title="功能的直接链接">​</a></h3>
<ul>
<li><strong>SQLExecutor</strong> 在 MCQA 1.0 模式下，允许增加自定义回退策略，新增类<code>FallbackPolicy.UserDefinedFallbackPolicy</code>。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0502-public---2024-10-23">[0.50.2-public] - 2024-10-23<a href="#0502-public---2024-10-23" class="hash-link" aria-label="[0.50.2-public] - 2024-10-23的直接链接" title="[0.50.2-public] - 2024-10-23的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="功能-1">功能<a href="#功能-1" class="hash-link" aria-label="功能的直接链接" title="功能的直接链接">​</a></h3>
<ul>
<li><strong>SQLExecutor</strong> 增强 MCQA 2.0 功能：<!-- -->
<ul>
<li><code>isActive</code> 将返回 false，指示在 MCQA 2.0 模式下没有活跃的 Session。</li>
<li>新增 <code>cancel</code> 方法，用于中止正在执行的作业。</li>
<li><code>getExecutionLog</code> 现在返回当前日志的深拷贝并清空当前日志，避免重复获取。</li>
<li>在 <code>SQLExecutorBuilder</code> 新增 <code>quota</code> 方法，支持复用已加载的 <code>Quota</code>，减少加载时间。</li>
<li>在 <code>SQLExecutorBuilder</code> 新增 <code>regionId</code> 方法，允许指定 quota 所在的 region。</li>
</ul>
</li>
<li><strong>Quotas</strong> 新增带 <code>regionId</code> 参数的 <code>getWlmQuota</code> 方法，用于获取指定 regionId 的 quota。</li>
<li><strong>Quota</strong> 新增 <code>setMcqaConnHeader</code> 方法，支持用户通过自定义的 McqaConnHeader 重载 quota，以适配 MCQA 2.0。</li>
<li><strong>Instances</strong> 新增适用于 MCQA 2.0 的 <code>get</code> 方法，需额外传入 MCQA 2.0 的 QuotaName 和 RegionId。</li>
<li><strong>Instance</strong> 进一步适配 MCQA 2.0 作业。</li>
<li><strong>TableSchema</strong> <code>basicallyEquals</code> 方法将不再严格检查两个类的 Class 类型一致性。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="优化">优化<a href="#优化" class="hash-link" aria-label="优化的直接链接" title="优化的直接链接">​</a></h3>
<ul>
<li><strong>SQLExecutor</strong> <code>run</code> 方法中的 hints 现在会进行深拷贝，保护用户传入的 Map，支持不可变类型（如 <code>ImmutableMap</code>）。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复">修复<a href="#修复" class="hash-link" aria-label="  修复的直接链接" title="修复的直接链接">​</a></h3>
<ul>
<li><strong>Stream</strong> 修复 <code>create</code> 方法中的潜在 SQL 语法错误。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0501-public---2024-10-11">[0.50.1-public] - 2024-10-11<a href="#0501-public---2024-10-11" class="hash-link" aria-label="[0.50.1-public] - 2024-10-11的直接链接" title="[0.50.1-public] - 2024-10-11的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复-1">修复<a href="#修复-1" class="hash-link" aria-label="修复的直接链接" title="修复的直接链接">​</a></h3>
<ul>
<li><strong>TableAPI</strong> 修复了使用<code>SplitRecordReaderImpl</code>获取结果时，拿到了<code>ArrayRecord</code>无法正确<code>toString</code>的问题。</li>
<li><strong>TableAPI</strong> 修复了使用<code>SplitRecordReaderImpl</code>获取结果时，如果<code>Split</code>对应的<code>Record</code>数量为0，在<code>get</code>
操作时会抛出数组越界异常的问题。</li>
<li><strong>TableAPI</strong> 修复了复合谓词<code>CompositePredicate</code>在遇到空谓词时，可能额外增加一次操作符的问题。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0500-public---2024-10-09">[0.50.0-public] - 2024-10-09<a href="#0500-public---2024-10-09" class="hash-link" aria-label="[0.50.0-public] - 2024-10-09的直接链接" title="[0.50.0-public] - 2024-10-09的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="功能-2">功能<a href="#功能-2" class="hash-link" aria-label="功能的直接链接" title="功能的直接链接">​</a></h3>
<ul>
<li>新增 <code>SchemaMismatchException</code> 异常：当使用 <code>StreamUploadSession</code> 时，如果用户上传的 Record 结构与表结构不匹配，将抛出该异常。此异常将额外携带最新的 schema version，方便用户重建 Session 并进行重试操作。</li>
<li>在 <code>StreamUploadSession.Builder</code> 中新增 <code>allowSchemaMismatch</code> 方法，用于指定是否容忍用户上传的 Record 结构与表结构不匹配时是否抛出异常。默认值为 <code>true</code>。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复-2">修复<a href="#修复-2" class="hash-link" aria-label="修复的直接链接" title="修复的直接链接">​</a></h3>
<ul>
<li>修复了在 Odps 中指定 <code>tunnelEndpoint</code> 时，使用 <code>StreamUploadSession</code> 无法生效的问题。</li>
<li>修复了 <code>TunnelRetryHandler</code> 潜在的 NPE 问题。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0500-rc1---2024-09-19">[0.50.0-rc1] - 2024-09-19<a href="#0500-rc1---2024-09-19" class="hash-link" aria-label="[0.50.0-rc1] - 2024-09-19的直接链接" title="[0.50.0-rc1] - 2024-09-19的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="功能-3">功能<a href="#功能-3" class="hash-link" aria-label="功能的直接链接" title="功能的直接链接">​</a></h3>
<ul>
<li><strong>SQLExecutor</strong> 新增 <code>isUseInstanceTunnel</code> 方法：<!-- -->
<ul>
<li>用来判断是否使用 instanceTunnel 取结果</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复-3">修复<a href="#修复-3" class="hash-link" aria-label="修复的直接链接" title="修复的直接链接">​</a></h3>
<ul>
<li>修复了使用 SQLExecutor 执行 MCQA 2.0 作业时，执行 CommandApi 任务会影响下一次作业，导致取结果时抛出NPE的问题。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0500-rc0---2024-09-18">[0.50.0-rc0] - 2024-09-18<a href="#0500-rc0---2024-09-18" class="hash-link" aria-label="[0.50.0-rc0] - 2024-09-18的直接链接" title="[0.50.0-rc0] - 2024-09-18的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="功能-4">功能<a href="#功能-4" class="hash-link" aria-label="功能的直接链接" title="功能的直接链接">​</a></h3>
<ul>
<li><strong>SQLExecutor</strong> 支持提交 MCQA 2.0 作业<!-- -->
<ul>
<li>SQLExecutorBuilder 新增方法 <code>enableMcqaV2</code></li>
<li>SQLExecutorBuilder 新增对字段的 getter 方法</li>
</ul>
</li>
<li>SQLExecutor 新增 <code>getQueryId</code> 方法：<!-- -->
<ul>
<li>对于离线作业和 MCQA 2.0 作业，会返回当前执行的作业 InstanceId</li>
<li>对于 MCQA 1.0 作业，会返回 InstanceId 和 SubQueryId</li>
</ul>
</li>
<li><strong>TableAPI</strong> <code>EnvironmentSettings</code> 新增 <code>SharingQuotaToken</code> 参数，以支持提交作业时携带Quota资源共享临时凭证</li>
<li><strong>Quotas</strong> 新增 <code>getWlmQuota</code> 方法：<!-- -->
<ul>
<li>能够根据 projectName 和 quotaNickName 获取到 quota 的详细信息，比如是否属于交互式 quota</li>
</ul>
</li>
<li><strong>Quota 类</strong>新增 <code>isInteractiveQuota</code> 方法，用来判断 quota 是否属于交互式 quota（适用于 MCQA 2.0）</li>
<li>新增 <code>getResultByInstanceTunnel(Instance instance, String taskName, Long limit, boolean limitEnabled)</code> 方法：<!-- -->
<ul>
<li>用来无限制地通过 instanceTunnel 获取结果（解除限制需要更高的权限）</li>
</ul>
</li>
<li><strong>UpsertSession.Builder</strong> 新增 <code>setLifecycle</code> 方法，用来配置 Session 生命周期</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复-4">修复<a href="#修复-4" class="hash-link" aria-label="修复的直接链接" title="修复的直接链接">​</a></h3>
<ul>
<li>修复了使用 SQLExecutor 执行离线作业时，指定 <code>limitEnabled</code> 取结果但不生效的问题</li>
<li>修改了 SQLExecutor 执行离线作业时，<code>getQueryId</code> 方法会返回作业的 instanceID 而非 null</li>
<li>修复了 SQLExecutor 执行离线作业时，当遇到非 select 语句时，使用 instanceTunnel 取结果不再抛出异常，而是回退到非 tunnel 逻辑</li>
<li>修复了使用 DownloadSession 下载数据时，发生错误且读取 数量刚好等于要读取记录的数量 - 1 时重建漏掉一条数据的问题</li>
<li><strong>Odps 类</strong>的 <code>clone</code> 方法现在能正确克隆包括 <code>tunnelEndpoint</code> 等其他字段</li>
<li><strong>Instance</strong> 的 <code>getRawTaskResults</code> 方法现在在处理同步作业时不会多次发起请求</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0490-public---2024-09-12">[0.49.0-public] - 2024-09-12<a href="#0490-public---2024-09-12" class="hash-link" aria-label="[0.49.0-public] - 2024-09-12的直接链接" title="[0.49.0-public] - 2024-09-12的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="功能-5">功能<a href="#功能-5" class="hash-link" aria-label="功能的直接链接" title="功能的直接链接">​</a></h3>
<ul>
<li>
<p><strong>OdpsRecordConverter 功能增强</strong>：现在支持将数据转换为 SQL 兼容格式，比如对于 <code>LocalDate</code>
类型，数据可以转换为 <code>&quot;DATE &#x27;yyyy-mm-dd&#x27;&quot;</code> 格式。同时对于 <code>Binary</code> 类型，现在支持了 hex 表示格式。</p>
</li>
<li>
<p><strong>开放存储谓词下推常量增强</strong>：改进了 <code>Constant</code> 类行为，新增了 <code>Constant.of(Object, TypeInfo)</code>
方法。现在当设定或识别出类型为时间类型时，可以正确转变为 SQL
兼容格式（也就是可以正确下推时间类型了）。同时修复了一些其他类型的问题，当无法转换成 SQL
兼容模式时，会在创建 <code>Session</code> 的时候抛出 <code>IllegalArgumentException</code>。</p>
</li>
<li>
<p><strong>UpsertSession 实现 Closable 方法</strong>：提醒用户应当正确释放 UpsertSession 的本地资源。</p>
</li>
<li>
<p><strong>SQLExecutorBuilder 新增方法</strong> <code>offlineJobPriority</code>：用来设置当作业发生回退时，离线作业的优先级。</p>
</li>
<li>
<p><strong>Table 类新增方法</strong> <code>getLastMajorCompactTime</code>  ：用来获取表最后一次 major compact 的时间。</p>
</li>
<li>
<p><strong>Instance 类新增方法</strong> <code>create(Job job, boolean tryWait)</code>：当用户执行 <code>tryWait</code> 为 <code>true</code>
时，作业会尝试在服务端等待一段时间，以更快获取结果。</p>
</li>
<li>
<p><strong>Resource 类增强</strong>：现在能够判断对应的资源是否属于临时资源。</p>
</li>
<li>
<p><strong>CreateProjectParma 类增强</strong> 新增<code>defaultCtrlService</code>参数，用来指定项目的默认控制集群。</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复-5">修复<a href="#修复-5" class="hash-link" aria-label="修复的直接链接" title="修复的直接链接">​</a></h3>
<ul>
<li>
<p><strong>UpsertStream NPE 修复</strong>：修复了在 flush 时，当发生本地错误时抛出 NPE 而无法正确重试的问题。</p>
</li>
<li>
<p><strong>Varchar/Char 类型修复</strong>：修复了 <code>Varchar/Char</code> 类型获取其长度时，当遇到中文符号或表情等特殊字符，会错误的计算两次的问题。</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0488-public---2024-08-12">[0.48.8-public] - 2024-08-12<a href="#0488-public---2024-08-12" class="hash-link" aria-label="[0.48.8-public] - 2024-08-12的直接链接" title="[0.48.8-public] - 2024-08-12的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="增强">增强<a href="#增强" class="hash-link" aria-label="增强的直接链接" title="增强的直接链接">​</a></h3>
<ul>
<li>引入了对复合谓词表达式的内部验证，修复了处理无效或总是真/假谓词时的逻辑，增强了测试覆盖，确保了在复杂查询优化中的稳定性和准确性。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0487-public---2024-08-07">[0.48.7-public] - 2024-08-07<a href="#0487-public---2024-08-07" class="hash-link" aria-label="[0.48.7-public] - 2024-08-07的直接链接" title="[0.48.7-public] - 2024-08-07的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="增强-1">增强<a href="#增强-1" class="hash-link" aria-label="增强的直接链接" title="增强的直接链接">​</a></h3>
<ul>
<li><strong>TableTunnel 配置优化</strong>：引入 <code>tags</code> 属性至 <code>TableTunnel Configuration</code>
，旨在允许用户为隧道相关操作附上自定义标签。这些标签会被记录在租户层级的 <code>information schema</code>
中，便于日志追踪与管理。</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Odps</span><span class="token plain"> odps</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Configuration</span><span class="token plain"> configuration</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Configuration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">odps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withTags</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Arrays</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">asList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;tag1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;tag2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 使用 Arrays.asList 以提升代码规范性</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">TableTunnel</span><span class="token plain"> tableTunnel</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">odps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">tableTunnel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">configuration</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 继续执行隧道相关操作</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong>Instance 增强</strong>：在 <code>Instance</code> 类中新增 <code>waitForTerminatedAndGetResult</code> 方法，此方法整合了 0.48.6
及 0.48.7 版本中对 <code>SQLExecutor</code>
接口的优化策略，提升了操作效率。使用方式可参考 <code>com.aliyun.odps.sqa.SQLExecutorImpl.getOfflineResultSet</code>
方法。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="优化-1">优化<a href="#优化-1" class="hash-link" aria-label="优化的直接链接" title="优化的直接链接">​</a></h3>
<ul>
<li><strong>SQLExecutor 离线作业处理优化</strong>：显著减少了端到端延迟，通过改进使得由 <code>SQLExecutor</code>
执行的离线作业能在关键处理阶段完成后即刻获取结果，无需等待作业全部完成，提高了响应速度和资源利用率。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复-6">修复<a href="#修复-6" class="hash-link" aria-label="修复的直接链接" title="修复的直接链接">​</a></h3>
<ul>
<li><strong>TunnelRetryHandler NPE修复</strong>：修正了 <code>getRetryPolicy</code> 方法中在错误码 (<code>error code</code>) 为 <code>null</code>
的情况下潜在空指针异常问题。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0486-public---2024-07-17">[0.48.6-public] - 2024-07-17<a href="#0486-public---2024-07-17" class="hash-link" aria-label="[0.48.6-public] - 2024-07-17的直接链接" title="[0.48.6-public] - 2024-07-17的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="新增">新增<a href="#新增" class="hash-link" aria-label="新增的直接链接" title="新增的直接链接">​</a></h3>
<ul>
<li><strong>支持序列化</strong>：<!-- -->
<ul>
<li>主要数据类型如 <code>ArrayRecord</code>、<code>Column</code>、<code>TableSchema</code> 和 <code>TypeInfo</code> 现在支持序列化和反序列化，能够进行缓存和进程间通信。</li>
</ul>
</li>
<li><strong>谓词下推</strong>：<!-- -->
<ul>
<li>新增 <code>Attribute</code> 类型的谓词，用于指定列名。</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="变更">变更<a href="#变更" class="hash-link" aria-label="变更的直接链接" title="变更的直接链接">​</a></h3>
<ul>
<li><strong>Tunnel 接口重构</strong>：<!-- -->
<ul>
<li>重构了 Tunnel 相关接口，加入了无感知的重试逻辑，大大增强了稳定性和鲁棒性。</li>
<li>删除了 <code>TunnelRetryStrategy</code> 和 <code>ConfigurationImpl</code> 类，分别被 <code>TunnelRetryHandler</code>
和 <code>Configuration</code> 所取代。</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="优化-2">优化<a href="#优化-2" class="hash-link" aria-label="优化的直接链接" title="优化的直接链接">​</a></h3>
<ul>
<li><strong>SQLExecutor 优化</strong>：<!-- -->
<ul>
<li>在使用 <code>SQLExecutor</code> 接口执行离线 SQL 作业时进行优化，减少每个作业获取结果时的一次网络请求，从而减少端到端延时。</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复-7">修复<a href="#修复-7" class="hash-link" aria-label="修复的直接链接" title="修复的直接链接">​</a></h3>
<ul>
<li><strong>Table.read Decimal 读取</strong>：<!-- -->
<ul>
<li>修复了 <code>Table.read</code> 接口在读取 <code>decimal</code> 类型时，后面补零不符合预期的问题。</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0485-public---2024-06-17">[0.48.5-public] - 2024-06-17<a href="#0485-public---2024-06-17" class="hash-link" aria-label="[0.48.5-public] - 2024-06-17的直接链接" title="[0.48.5-public] - 2024-06-17的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="新增-1">新增<a href="#新增-1" class="hash-link" aria-label="新增的直接链接" title="新增的直接链接">​</a></h3>
<ul>
<li><code>Table</code> 接口新增 <code>getPartitionSpecs</code> 方法, 相比 <code>getPartitions</code> 方法，该方法无需获取分区的详细信息，进而获得更快的执行速度</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="变更-1">变更<a href="#变更-1" class="hash-link" aria-label="变更的直接链接" title="变更的直接链接">​</a></h3>
<ul>
<li>移除了<code>Column</code>类中的<code>isPrimaryKey</code>
方法。这个方法最初是为了支持用户在创建表时指定某些列为主键。然而，在读取场景下，这个方法容易引起误解，因为它并不会与服务端通信，所以当用户希望知道某列是否为主键时，这个方法并不适用。此外，在使用该方法建表时，主键应当是表级别的字段（因为主键是有序的），而该方法忽略了主键的顺序，设计上不合理。因此，在0.48.5版本中移除了该方法。
在读取场景，用户应当使用<code>Table.getPrimaryKey()</code>方法来获取主键。
在建表场景，改为在<code>TableCreator</code>中增加<code>withPrimaryKeys</code>方法以达成建表时指定主键的目的。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复-8">修复<a href="#修复-8" class="hash-link" aria-label="修复的直接链接" title="修复的直接链接">​</a></h3>
<p>修复了<code>RecordConverter</code>在format String类型的<code>Record</code>，当数据类型为<code>byte[]</code> 时，会抛出异常的问题</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0484-public---2024-06-04">[0.48.4-public] - 2024-06-04<a href="#0484-public---2024-06-04" class="hash-link" aria-label="[0.48.4-public] - 2024-06-04的直接链接" title="[0.48.4-public] - 2024-06-04的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="新增-2">新增<a href="#新增-2" class="hash-link" aria-label="新增的直接链接" title="新增的直接链接">​</a></h3>
<ul>
<li>使用 <code>table-api</code> 写MaxCompute表，现在支持<code>JSON</code>和<code>TIMESTAMP_NTZ</code>类型</li>
<li><code>odps-sdk-udf</code> 功能继续完善</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="变更-2">变更<a href="#变更-2" class="hash-link" aria-label="变更的直接链接" title="变更的直接链接">​</a></h3>
<ul>
<li>Table.read() 接口在遇到 Decimal 类型时，目前将默认去掉尾部的 0（但不会使用科学计数法）</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复-9">修复<a href="#修复-9" class="hash-link" aria-label="修复的直接链接" title="修复的直接链接">​</a></h3>
<ul>
<li>修复了 ArrayRecord 针对 JSON 类型不支持 getBytes 方法的问题</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0483-public---2024-05-21">[0.48.3-public] - 2024-05-21<a href="#0483-public---2024-05-21" class="hash-link" aria-label="[0.48.3-public] - 2024-05-21的直接链接" title="[0.48.3-public] - 2024-05-21的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="新增-3">新增<a href="#新增-3" class="hash-link" aria-label="新增的直接链接" title="新增的直接链接">​</a></h3>
<ul>
<li>在构建UpsertSession时，现在支持传入 <code>retryStrategy</code>。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="变更-3">变更<a href="#变更-3" class="hash-link" aria-label="变更的直接链接" title="变更的直接链接">​</a></h3>
<ul>
<li><code>UpsertStream.Listener</code> 的 <code>onFlushFail(String, int)</code> 接口被标记为了 <code>@Deprecated</code>
，使用 <code>onFlushFail(Throwable, int)</code> 接口替代。该接口将在 0.50.0 版本中移除。</li>
<li>Tunnel upsert 的默认压缩算法更改为 <code>ODPS_LZ4_FRAME</code>。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复-10">修复<a href="#修复-10" class="hash-link" aria-label="修复的直接链接" title="修复的直接链接">​</a></h3>
<ul>
<li>修复了 Tunnel upsert 当压缩算法不为 <code>ZLIB</code> 时，数据无法正确写入的问题。</li>
<li>修复了 UpsertSession 当用户未显式调用 <code>close</code> 时，资源长时间无法释放的问题。</li>
<li>修复了 Tunnel 获取数据相关接口（<code>preview</code>，<code>download</code>），当遇到表内存在不合法 <code>Decimal</code>
类型时（如 <code>inf</code>，<code>nan</code>），会抛出异常的问题，现在会返回 <code>null</code>（与 <code>getResult</code> 接口一致）。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0482-public---2024-05-08">[0.48.2-public] - 2024-05-08<a href="#0482-public---2024-05-08" class="hash-link" aria-label="[0.48.2-public] - 2024-05-08的直接链接" title="[0.48.2-public] - 2024-05-08的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="重要修复">重要修复<a href="#重要修复" class="hash-link" aria-label="重要修复的直接链接" title="重要修复的直接链接">​</a></h3>
<ul>
<li>修复了Tunnel
upsert时，对DATE、DATETIME类型的主键进行分桶时，依赖用户本地时区的问题。这可能导致分桶有误，导致数据查询异常。强烈建议依赖该特性的用户升级到0.48.2版本。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="新增-4">新增<a href="#新增-4" class="hash-link" aria-label=" 新增的直接链接" title="新增的直接链接">​</a></h3>
<ul>
<li><code>Table</code>增加获取分层存储的lifecycle配置的方法<code>getTableLifecycleConfig()</code>。</li>
<li><code>TableReadSession</code> 现支持谓词下推了</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0481-public---2024-05-07">[0.48.1-public] - 2024-05-07<a href="#0481-public---2024-05-07" class="hash-link" aria-label="[0.48.1-public] - 2024-05-07的直接链接" title="[0.48.1-public] - 2024-05-07的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="新增-5">新增<a href="#新增-5" class="hash-link" aria-label="新增的直接链接" title="新增的直接链接">​</a></h3>
<p>Arrow和ANTLR库：在 Maven Shade
插件配置中添加了新的包含项，以更好地处理和打包特定库。这些包含项确保某些关键库被正确地打包进最终的遮蔽(
Shaded)构件中。新加入的库包括：</p>
<ul>
<li>org.apache.arrow:arrow-format<!-- -->:jar</li>
<li>org.apache.arrow:arrow-memory-core<!-- -->:jar</li>
<li>org.apache.arrow:arrow-memory-netty<!-- -->:jar</li>
<li>org.antlr:ST4<!-- -->:jar</li>
<li>org.antlr:antlr-runtime<!-- -->:jar</li>
<li>org.antlr:antlr4<!-- -->:jar</li>
<li>org.antlr:antlr4-runtime<!-- -->:jar</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="位置调整">位置调整<a href="#位置调整" class="hash-link" aria-label="位置调整的直接链接" title="位置调整的直接链接">​</a></h3>
<p>ANTLR和StringTemplate的遮蔽重定位：配置现在包括针对 org.antlr 和 org.stringtemplate.v4
包的更新重定位规则，以防止可能在类路径中存在的这些库的其他版本的潜在冲突。新的遮蔽模式是：
org.stringtemplate.v4 重定位至 com.aliyun.odps.thirdparty.org.stringtemplate.v4
org.antlr 重定位至 com.aliyun.odps.thirdparty.antlr</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0480-public---2024-04-22">[0.48.0-public] - 2024-04-22<a href="#0480-public---2024-04-22" class="hash-link" aria-label="[0.48.0-public] - 2024-04-22的直接链接" title="[0.48.0-public] - 2024-04-22的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="新增-6">新增<a href="#新增-6" class="hash-link" aria-label="新增的直接链接" title="新增的直接链接">​</a></h3>
<ul>
<li>引入了<code>odps-sdk-udf</code>模块，支持在UDF中按批读取MaxCompute数据，能在大数据量场景下显著提高性能。</li>
<li><code>Table</code>现支持获取<code>ColumnMaskInfo</code>，用于数据脱敏场景，方便相关信息的获取。</li>
<li>新增通过<code>odps.getRestClient().setProxy(Proxy)</code>方法设置代理的支持。</li>
<li>实现了可迭代的<code>RecordReader</code>以及<code>RecordReader.stream()</code>方法，允许将其转换为<code>Record</code>对象的流。</li>
<li>在<code>TableAPI RestOptions</code>中新增<code>upsertConcurrentNum</code>和<code>upsertNetworkNum</code>
参数，为使用TableAPI进行upsert操作的用户提供更细致的控制。</li>
<li>支持使用<code>Builder</code>模式来构建<code>TableSchema</code>。</li>
<li><code>ArrayRecord</code>支持<code>toString</code>方法。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="变更-4">变更<a href="#变更-4" class="hash-link" aria-label="变更的直接链接" title="变更的直接链接">​</a></h3>
<ul>
<li>现在，当用户使用<code>StsAccount</code>但不传递<code>StsToken</code>时，将被视作使用<code>AliyunAccount</code>。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="改进">改进<a href="#改进" class="hash-link" aria-label="改进的直接链接" title="改进的直接链接">​</a></h3>
<ul>
<li><code>UploadSession</code>现支持配置<code>GET_BLOCK_ID</code>参数，当客户端不需要<code>blockId</code>时，可以加速创建Session的速度。</li>
<li>使用<code>builder</code>模式(<code>TableCreator</code>)加强了表的创建方法，现在可以更简单地创建表了。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复-11">修复<a href="#修复-11" class="hash-link" aria-label="修复的直接链接" title="修复的直接链接">​</a></h3>
<ul>
<li>修复了<code>Upsert Session</code>获取连接时，超时时间配置错误的问题。</li>
<li>修复了<code>TimestampWritable</code>在纳秒为负数时计算出错一秒的问题。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0470-public---2024-04-08">[0.47.0-public] - 2024-04-08<a href="#0470-public---2024-04-08" class="hash-link" aria-label="[0.47.0-public] - 2024-04-08的直接链接" title="[0.47.0-public] - 2024-04-08的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="新增-7">新增<a href="#新增-7" class="hash-link" aria-label="新增的直接链接" title="新增的直接链接">​</a></h3>
<ul>
<li>对 Stream 新类型的支持，可用于进行增量查询。</li>
<li>在 <code>TableTunnel</code> 中增加了 <code>preview</code> 方法，用于数据预览。</li>
<li>引入 <code>OdpsRecordConverter</code>，用于对 Record 进行解析和格式化。</li>
<li><code>Projects</code> 类增加了 <code>create</code>（创建）和 <code>delete</code>（删除）方法，<code>update</code> 方法现已公开。<code>group-api</code>
包下的相关操作已被标记为弃用。</li>
<li><code>Schemas</code> 类增强，支持通过设置 <code>SchemaFilter</code> 来过滤 schema，支持 <code>listSchema</code> 以及获取 schema
的详细元信息。</li>
<li><code>DownloadSession</code> 新增参数 <code>disableModifiedCheck</code>，用于跳过修改检查。新增参数 <code>fetchBlockId</code>，用于跳过获取
block ID 列表。</li>
<li><code>TableWriteSession</code> 支持写入 <code>TIMESTAMP_NTZ</code> / <code>JSON</code> 类型，新增参数 <code>MaxFieldSize</code>。</li>
<li><code>TABLE_API</code> 新增 <code>predicate</code> 相关类，用于后续支持谓词下推。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="变更-5">变更<a href="#变更-5" class="hash-link" aria-label="变更的直接链接" title="变更的直接链接">​</a></h3>
<ul>
<li><code>Table</code> 类的 <code>read</code> 方法实现现已更换为 <code>TableTunnel.preview</code> 方法，会支持 MaxCompute 新类型，时间类型切换为
Java 8 无时区类型。</li>
<li>默认的 <code>MapWritable</code> 实现从 <code>HashMap</code> 改为 <code>LinkedHashMap</code>，以确保有序。</li>
<li><code>Column</code> 类现支持使用建造者模式（Builder pattern）进行创建。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="改进-1">改进<a href="#改进-1" class="hash-link" aria-label="改进的直接链接" title="改进的直接链接">​</a></h3>
<ul>
<li><code>TableReadSession</code> 新增参数 <code>maxBatchRawSize</code> 和 <code>splitMaxFileNum</code>。</li>
<li><code>UpsertSession</code> 现支持：<!-- -->
<ul>
<li>写入部分列。</li>
<li>设置 Netty 线程池的数量（默认更改为 1）。</li>
<li>设置最大并发量（默认值更改为 16）。</li>
</ul>
</li>
<li><code>TableTunnel</code> 支持设置 <code>quotaName</code> 选项。</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/aliyun-odps-java-sdk/operations/tunnel-tags/"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">对 Tunnel 操作打标</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/aliyun-odps-java-sdk/question/"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">常见问题</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#0503-public---2024-10-23" class="table-of-contents__link toc-highlight">[0.50.3-public] - 2024-10-23</a><ul><li><a href="#功  能" class="table-of-contents__link toc-highlight">功能</a></li></ul></li><li><a href="#0502-public---2024-10-23" class="table-of-contents__link toc-highlight">[0.50.2-public] - 2024-10-23</a><ul><li><a href="#功能-1" class="table-of-contents__link toc-highlight">功能</a></li><li><a href="#优化" class="table-of-contents__link toc-highlight">优化</a></li><li><a href="#修复" class="table-of-contents__link toc-highlight">修复</a></li></ul></li><li><a href="#0501-public---2024-10-11" class="table-of-contents__link toc-highlight">[0.50.1-public] - 2024-10-11</a><ul><li><a href="#修复-1" class="table-of-contents__link toc-highlight">修复</a></li></ul></li><li><a href="#0500-public---2024-10-09" class="table-of-contents__link toc-highlight">[0.50.0-public] - 2024-10-09</a><ul><li><a href="#功能-2" class="table-of-contents__link toc-highlight">功能</a></li><li><a href="#修复-2" class="table-of-contents__link toc-highlight">修复</a></li></ul></li><li><a href="#0500-rc1---2024-09-19" class="table-of-contents__link toc-highlight">[0.50.0-rc1] - 2024-09-19</a><ul><li><a href="#功能-3" class="table-of-contents__link toc-highlight">功能</a></li><li><a href="#修复-3" class="table-of-contents__link toc-highlight">修复</a></li></ul></li><li><a href="#0500-rc0---2024-09-18" class="table-of-contents__link toc-highlight">[0.50.0-rc0] - 2024-09-18</a><ul><li><a href="#功能-4" class="table-of-contents__link toc-highlight">功能</a></li><li><a href="#修复-4" class="table-of-contents__link toc-highlight">修复</a></li></ul></li><li><a href="#0490-public---2024-09-12" class="table-of-contents__link toc-highlight">[0.49.0-public] - 2024-09-12</a><ul><li><a href="#功能-5" class="table-of-contents__link toc-highlight">功能</a></li><li><a href="#修复-5" class="table-of-contents__link toc-highlight">修复</a></li></ul></li><li><a href="#0488-public---2024-08-12" class="table-of-contents__link toc-highlight">[0.48.8-public] - 2024-08-12</a><ul><li><a href="#增强" class="table-of-contents__link toc-highlight">增强</a></li></ul></li><li><a href="#0487-public---2024-08-07" class="table-of-contents__link toc-highlight">[0.48.7-public] - 2024-08-07</a><ul><li><a href="#增强-1" class="table-of-contents__link toc-highlight">增强</a></li><li><a href="#优化-1" class="table-of-contents__link toc-highlight">优化</a></li><li><a href="#修复-6" class="table-of-contents__link toc-highlight">修复</a></li></ul></li><li><a href="#0486-public---2024-07-17" class="table-of-contents__link toc-highlight">[0.48.6-public] - 2024-07-17</a><ul><li><a href="#新增" class="table-of-contents__link toc-highlight">新增</a></li><li><a href="#变更" class="table-of-contents__link toc-highlight">变更</a></li><li><a href="#优化-2" class="table-of-contents__link toc-highlight">优化</a></li><li><a href="#修复-7" class="table-of-contents__link toc-highlight">修复</a></li></ul></li><li><a href="#0485-public---2024-06-17" class="table-of-contents__link toc-highlight">[0.48.5-public] - 2024-06-17</a><ul><li><a href="#新增-1" class="table-of-contents__link toc-highlight">新增</a></li><li><a href="#变更-1" class="table-of-contents__link toc-highlight">变更</a></li><li><a href="#修复-8" class="table-of-contents__link toc-highlight">修复</a></li></ul></li><li><a href="#0484-public---2024-06-04" class="table-of-contents__link toc-highlight">[0.48.4-public] - 2024-06-04</a><ul><li><a href="#新增-2" class="table-of-contents__link toc-highlight">新增</a></li><li><a href="#变更-2" class="table-of-contents__link toc-highlight">变更</a></li><li><a href="#修复-9" class="table-of-contents__link toc-highlight">修复</a></li></ul></li><li><a href="#0483-public---2024-05-21" class="table-of-contents__link toc-highlight">[0.48.3-public] - 2024-05-21</a><ul><li><a href="#新增-3" class="table-of-contents__link toc-highlight">新增</a></li><li><a href="#变更-3" class="table-of-contents__link toc-highlight">变更</a></li><li><a href="#修复-10" class="table-of-contents__link toc-highlight">修复</a></li></ul></li><li><a href="#0482-public---2024-05-08" class="table-of-contents__link toc-highlight">[0.48.2-public] - 2024-05-08</a><ul><li><a href="#重要修复" class="table-of-contents__link toc-highlight">重要修复</a></li><li><a href="#新增-4" class="table-of-contents__link toc-highlight">新增</a></li></ul></li><li><a href="#0481-public---2024-05-07" class="table-of-contents__link toc-highlight">[0.48.1-public] - 2024-05-07</a><ul><li><a href="#新增-5" class="table-of-contents__link toc-highlight">新增</a></li><li><a href="#位置调整" class="table-of-contents__link toc-highlight">位置调整</a></li></ul></li><li><a href="#0480-public---2024-04-22" class="table-of-contents__link toc-highlight">[0.48.0-public] - 2024-04-22</a><ul><li><a href="#新增-6" class="table-of-contents__link toc-highlight">新增</a></li><li><a href="#变更-4" class="table-of-contents__link toc-highlight">变更</a></li><li><a href="#改进" class="table-of-contents__link toc-highlight">改进</a></li><li><a href="#修复-11" class="table-of-contents__link toc-highlight">修复</a></li></ul></li><li><a href="#0470-public---2024-04-08" class="table-of-contents__link toc-highlight">[0.47.0-public] - 2024-04-08</a><ul><li><a href="#新增-7" class="table-of-contents__link toc-highlight">新增</a></li><li><a href="#变更-5" class="table-of-contents__link toc-highlight">变更</a></li><li><a href="#改进-1" class="table-of-contents__link toc-highlight">改进</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>